!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("moment"),require("@angular/forms"),require("@angular/common")):"function"==typeof define&&define.amd?define("ngx-funny-datepicker",["exports","@angular/core","moment","@angular/forms","@angular/common"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["ngx-funny-datepicker"]={},t.ng.core,t.moment$1,t.ng.forms,t.ng.common)}(this,(function(t,e,n,a,i){"use strict";function s(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var a=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,a.get?a:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var r=s(n),o=function(){};o.ɵprov=e.ɵɵdefineInjectable({factory:function(){return new o},token:o,providedIn:"root"}),o.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],o.ctorParameters=function(){return[]};var d=function(){function t(){var t=this;this.valueDate=new e.EventEmitter,this.startDate=r(),this.locale="en",this.rangeLabel="Range",this.timeLabel="Time",this.clearLabel="Clear",this.emitValue=function(e){return t.valueDate.emit(e)}}return t.prototype.ngOnInit=function(){},t}();d.decorators=[{type:e.Component,args:[{selector:"ngx-funny-datepicker-dummy",template:"\n    Please use ngx-funny-datepicker\n  "}]}],d.ctorParameters=function(){return[]},d.propDecorators={valueDate:[{type:e.Output}],isRange:[{type:e.Input}],hasTime:[{type:e.Input}],startDate:[{type:e.Input}],endDate:[{type:e.Input}],minDate:[{type:e.Input}],maxDate:[{type:e.Input}],locale:[{type:e.Input}],rangeLabel:[{type:e.Input}],timeLabel:[{type:e.Input}],clearLabel:[{type:e.Input}],classInput:[{type:e.Input}]};var l=r,c=function(){function t(){var t=this;this.value="",this.locale="en",this.rangeLabel="Range",this.timeLabel="Time",this.clearLabel="Clear",this.emitSelected=new e.EventEmitter,this.weekDaysHeaderArr=[],this.gridArr={},this.canAccessPrevious=!0,this.canAccessNext=!0,this.todayDate=l().set({hour:0,minute:0,second:0,millisecond:0}),this.mode="end",this.isInvalid=!1,this.formatInputDate="D MMM, YYYY",this.onChange=function(t){},this.onTouch=function(){t.onTouched=!0},this.concatValueInput=function(){var e=[t.startDate.format(t.formatInputDate),t.endDate?"  -  ":"",t.endDate?t.endDate.format(t.formatInputDate):""];t.value=e.join(""),t.isInvalid=!t.value.length},this.reFormatInput=function(){t.concatValueInput(),t.formatInputDate=t.includeTime?"D MMM, YYYY h:mm A":"D MMM, YYYY"},this.simulateClick=function(t){try{setTimeout((function(){var e=document.querySelector(".calendar-day-not-range-"+t+" > button");e&&e.click()}),50)}catch(t){return null}}}return t.prototype.ngOnInit=function(){this.setOptions(),l.locale(this.locale),this.startDate||(this.startDate=l()),this.navDate=l(),this.makeHeader(),this.currentMonth=this.navDate.month(),this.currentYear=this.navDate.year(),this.makeGrid(this.currentYear,this.currentMonth),this.isInvalid=!this.value.length},t.prototype.onInput=function(t){this.value=t,this.onTouch(),this.onChange(this.value)},t.prototype.writeValue=function(t){this.value=t&&t||""},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouch=t},t.prototype.setDisabledState=function(t){this.isDisabled=t},t.prototype.setOptions=function(){this.includeEndDate=!1,this.includeTime=!1},t.prototype.setAccess=function(){this.canAccessPrevious=this.canChangeNavMonth(-1),this.canAccessNext=this.canChangeNavMonth(1)},t.prototype.changeNavMonth=function(t){this.canChangeNavMonth(t)&&(this.navDate.add(t,"month"),this.currentMonth=this.navDate.month(),this.currentYear=this.navDate.year(),this.makeGrid(this.currentYear,this.currentMonth))},t.prototype.canChangeNavMonth=function(t){var e=l(this.navDate);return this.canChangeNavMonthLogic(t,e)},t.prototype.makeHeader=function(){var t=this;[0,1,2,3,4,5,6].forEach((function(e){return t.weekDaysHeaderArr.push(l().weekday(e).format("ddd"))}))},t.prototype.getDimensions=function(t){var e=l(t).startOf("month");this.initialEmptyCells=e.weekday();var n=l(t).endOf("month");this.lastEmptyCells=6-n.weekday(),this.arrayLength=this.initialEmptyCells+this.lastEmptyCells+t.daysInMonth()},t.prototype.makeGrid=function(t,e){if(this.gridArr.hasOwnProperty(t)||(this.gridArr[t]={}),!this.gridArr[t].hasOwnProperty(e)){this.gridArr[t][e]=[],this.getDimensions(this.navDate);for(var n=0;n<this.arrayLength;n++){var a={};n<this.initialEmptyCells||n>this.initialEmptyCells+this.navDate.daysInMonth()-1?(a.value=0,a.available=!1,a.isToday=!1):(a.value=n-this.initialEmptyCells+1,a.available=this.isAvailable(n-this.initialEmptyCells+1),a.isToday=this.isToday(n-this.initialEmptyCells+1,e,t),a.month=e,a.date=this.navDate,a.year=t,a.isActive=!1,this.dateFromDayAndMonthAndYear(a.value,e,t).isSame(this.startDate)&&(this.startDay=a),this.dateFromDayAndMonthAndYear(a.value,e,t).isSame(this.endDate)&&(this.endDay=a),!a.isToday||this.startDay||this.endDay||(this.startDay=a,this.endDay=a,a.isActive=!0)),a.inRange=!1,this.gridArr[t][e].push(a)}}this.setAccess()},t.prototype.isAvailable=function(t){var e=this.dateFromNum(t,this.navDate);return this.isAvailableLogic(e)},t.prototype.isToday=function(t,e,n){return l(this.dateFromDayAndMonthAndYear(t,e,n)).isSame(l().set({hour:0,minute:0,second:0,millisecond:0}))},t.prototype.dateFromNum=function(t,e){return l(e).date(t)},t.prototype.selectDay=function(t){if(t.available){if(this.selectedDate=this.dateFromDayAndMonthAndYear(t.value,t.month,t.year),this.includeEndDate){var e=this.dateFromDayAndMonthAndYear(t.value,t.month,t.year);switch(this.mode){case"end":e.isSame(l(this.startDate).startOf("day"))?this.mode="start":e.isSameOrBefore(this.startDate)?(this.endDay=this.startDay,this.startDay=t,this.mode="start"):this.endDay=t;break;case"start":e.isSame(l(this.endDate).startOf("day"))?this.mode="end":e.isSameOrAfter(this.endDate)?(this.startDay=this.endDay,this.endDay=t,this.mode="end"):this.startDay=t}this.startDate=this.generateDate(this.startDay,this.startDate),this.endDate=this.generateDate(this.endDay,this.endDate),this.applyRange(),this.startDay.isActive=!0,this.endDay.isActive=!0,this.selected={startDate:this.startDate,endDate:this.endDate}}else this.resetActivity(),this.startDate=this.selectedDate,this.startDay=t,this.startDay.isActive=!0,this.selected={startDate:this.startDate},this.emitSelected.emit(this.selected);this.startDate&&this.endDate&&this.emitSelected.emit(this.selected),this.reFormatInput()}},t.prototype.generateDate=function(t,e){var n=this.dateFromDayAndMonthAndYear(t.value,t.month,t.year);return e&&(n=n.set({hour:e.hour(),minute:e.minute()})),n},t.prototype.resetRange=function(){var t=this;Object.keys(this.gridArr).forEach((function(e){Object.keys(t.gridArr[e]).forEach((function(n){t.gridArr[e][n].map((function(t){t.inRange=!1,t.isActive=!1}))}))}))},t.prototype.resetActivity=function(){var t=this;Object.keys(this.gridArr).forEach((function(e){Object.keys(t.gridArr[e]).forEach((function(n){t.gridArr[e][n].map((function(t){t.isActive=!1}))}))}))},t.prototype.dateFromDayAndMonthAndYear=function(t,e,n){var a={hour:0,minute:0,second:0,millisecond:0};return this.includeTime&&(a={hour:this.startDate.hour(),minute:this.startDate.minute(),second:0,millisecond:0},this.startDate.format("h:mm A")),l([n,e,t]).set(a)},t.prototype.applyRange=function(){var t=this;this.getDimensions(this.startDate);var e=this.initialEmptyCells+this.startDay.value-1,n=this.arrayLength;this.getDimensions(this.endDate);var a=this.arrayLength,i=this.initialEmptyCells+this.endDay.value-1;if(this.resetRange(),this.startDay.month!==this.endDay.month||this.startDay.year!==this.endDay.year)Object.keys(this.gridArr).forEach((function(s){var r=t.gridArr[s];Object.keys(r).forEach((function(r){var o=t.gridArr[s][r];if(r==t.startDay.month&&s==t.startDay.year){for(var d=0;d<e;d++)o[d].inRange=!1;for(d=e;d<n;d++)o[d].inRange=!0}else if(r==t.endDay.month&&s==t.endDay.year){for(d=0;d<=i;d++)o[d].inRange=!0;for(d=i+1;d<a;d++)o[d].inRange=!1}else(r>t.startDay.month||s>t.startDay.year)&&(r<t.endDay.month||s<t.endDay.year)&&o.forEach((function(t){return t.inRange=!0}))}))}));else{for(var s=this.startDay.month,r=this.startDay.year,o=0;o<e;o++)this.gridArr[r][s][o].inRange=!1;for(o=e;o<=i;o++)this.gridArr[r][s][o].inRange=!0;for(o=i+1;o<this.arrayLength;o++)this.gridArr[r][s][o].inRange=!1}},t.prototype.isAvailableLogic=function(t){return this.minDate||this.maxDate?!(t.isBefore(this.minDate)||t.isAfter(this.maxDate)):!t.isBefore(l(),"day")},t.prototype.canChangeNavMonthLogic=function(t,e){e.add(t,"month");var n=this.minDate?this.minDate:l().add(-1,"month"),a=this.maxDate?this.maxDate:l().add(1,"year");return e.isBetween(n,a)},t.prototype.toggleCalendar=function(){this.isOpen=!this.isOpen},t.prototype.openCalendar=function(){this.isOpen=!0,this.onTouch()},t.prototype.closeCalendar=function(){this.isOpen=!1,this.emitSelected.emit(this.selected)},t.prototype.changeMode=function(t){this.mode=t,this.onTouch()},t.prototype.clear=function(){this.resetRange(),this.startDate=l(),this.endDate=null,this.navDate=this.todayDate,this.currentMonth=this.navDate.month(),this.currentYear=this.navDate.year(),this.includeEndDate=!1,this.includeTime=!1,this.startTime=null,this.endTime=null,this.mode="start",this.makeGrid(this.currentYear,this.currentMonth),this.reFormatInput()},t.prototype.setTime=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),t.set({hour:e,minute:n,second:0,millisecond:0})},t.prototype.handleModeChange=function(){if(this.resetRange(),this.mode="end",this.startDay&&(this.startDay.isActive=!0),this.includeEndDate){var t=this.startDate.clone(),e=t.add(2,"days").format("YYYY-"+(t.format("M")-1)+"-D");this.simulateClick(e)}else this.endDate=null,this.mode="start",this.startDay.isActive=!1,this.endDay.isActive=!1},t.prototype.setStartTime=function(t){this.startTime=t},t.prototype.setEndTime=function(t){this.endTime=t},t.prototype.handleTimeChange=function(t,e,n){if(this.reFormatInput(),t){t=t.replace(/[^a-zA-Z0-9]/g,""),e.set({hour:0,minute:0,second:0,millisecond:0});var a=t.substr(t.length-2).toUpperCase(),i=t.substr(t.length-1).toUpperCase(),s=["AM","PM"].includes(a),r=!0;switch((["A","P"].includes(i)||s)&&(r="A"===i||"AM"===a,"P"===i||"PM"===a),a=(t=t.replace(/[^0-9]/g,"")).substr(t.length-2),i=t.substr(t.length-1),t=t.substr(0,4),this.isInvalid=!1,t.length){case 1:e=r?this.setTime(e,Number(t)):this.setTime(e,Number(t)+12);break;case 2:if(i>=6){this.isInvalid=!0;break}e=12===t?r?this.setTime(e,0):this.setTime(e,12):t<12?r?this.setTime(e,Number(t)):this.setTime(e,Number(t)+12):r?this.setTime(e,Number(t[0]),Number(i)):this.setTime(e,Number(t[0])+12,Number(i));break;case 3:if(a>=60){this.isInvalid=!0;break}e=r?this.setTime(e,Number(t[0]),Number(a)):this.setTime(e,Number(t[0])+12,Number(a));break;case 4:if(a>=60){this.isInvalid=!0;break}e=this.setTime(e,Number(t.substr(0,2)),Number(a));break;default:this.isInvalid=!0}console.log("--",this.isInvalid),this.emitSelected.emit(this.selected),"start"===n?(this.startDate=e,this.startTimePicker.nativeElement.blur()):(this.endDate=e,this.endTimePicker.nativeElement.blur())}},t}();c.decorators=[{type:e.Component,args:[{selector:"ngx-funny-datepicker",template:'\x3c!-- ********* INPUT FROM DATE Collaborator https://github.com/leifermendez ***************** ---\x3e\n\n<input (click)="openCalendar()" readonly spellcheck="false" class="omit-trigger-outside input-date-funny {{classInput}}"\n  autocomplete="nope" [value]="value" [disabled]="isDisabled" (input)="onInput($event.target.value)" [ngClass]="{\n    \'date-picker-valid ng-valid\': !isInvalid,\n     \'date-picker-invalid ng-invalid\': isInvalid,\n     \'funny-range\':includeEndDate,\n     \'ng-opened\': isOpen,\n     \'ng-touched\': onTouched,\n     \'ng-untouched\': !onTouched\n    }" type="text">\n\n\x3c!--- *************** CALENDAR ELEMENTS Author https://github.com/mokshithpyla ************* ---\x3e\n<div (clickOutside)="closeCalendar()" class="calendar" *ngIf="isOpen">\n  <form (keydown.enter)="$event.preventDefault()"></form>\n  <div class="calendar-nav">\n    <div class="calendar-nav-previous-month">\n      <button type="button" class="button is-text" (click)="changeNavMonth(-1)" [disabled]="!canAccessPrevious">\n        <i class="fa fa-chevron-left"></i>\n      </button>\n    </div>\n    <div>{{navDate.format(\'MMMM YYYY\')}}</div>\n    <div class="calendar-nav-next-month">\n      <button type="button" class="button is-text" (click)="changeNavMonth(1)" [disabled]="!canAccessNext">\n        <i class="fa fa-chevron-right"></i>\n      </button>\n    </div>\n  </div>\n  <div class="calendar-container">\n    <div class="calendar-header">\n      <div class="calendar-date" *ngFor="let day of weekDaysHeaderArr">\n        {{day}}\n      </div>\n    </div>\n    <div class="calendar-body" *ngIf="includeEndDate; else notRange">\n      <ng-container *ngIf="gridArr">\n        <div *ngFor="let day of gridArr[currentYear][currentMonth]"\n          class="calendar-date calendar-day-not-range-{{currentYear}}-{{currentMonth}}-{{day?.value}}"\n          [ngClass]="{\n          \'is-disabled\': !day.available,\n          \'calendar-range\': day.inRange,\n          \'calendar-range-start\': day.value === startDay?.value &&  day.month === startDay?.month && day.year === startDay?.year ,\n          \'calendar-range-end\': day.value === endDay?.value && day.month === endDay?.month && day.year === endDay?.year}">\n          <button type="button" *ngIf="day.value !== 0" class="date-item"\n            [ngClass]="{\'is-active\': day.isActive, \'is-today\': day.isToday}" (click)="selectDay(day)">\n            {{day.value}}</button>\n          <button type="button" *ngIf="day.value === 0" class="date-item"></button>\n        </div>\n      </ng-container>\n    </div>\n    <ng-template #notRange>\n      <div class="calendar-body">\n        <div *ngFor="let day of gridArr[currentYear][currentMonth]"\n          class="calendar-date calendar-day-range-{{currentYear}}-{{currentMonth}}-{{day?.value}}"\n          [ngClass]="{\'is-disabled\': !day.available }">\n          <button type="button" *ngIf="day.value !== 0" class="date-item"\n            [ngClass]="{\'is-active\': day.isActive, \'is-today\': day.isToday}"\n            (click)="selectDay(day)">{{day.value}}</button>\n          <button type="button" *ngIf="day.value === 0" class="date-item"></button>\n        </div>\n      </div>\n    </ng-template>\n    <div class="footer-calendar">\n      <div class="flex justify-content-between options-bar divider">\n        <div class="flex">\n          <div class="label-placeholder label-option pr-25">\n            <input type="checkbox" [(ngModel)]="includeEndDate" (change)="handleModeChange()">\n            <small>{{rangeLabel}}</small>\n          </div>\n          <div class="label-placeholder label-option pr-25">\n            <input\n              (change)="reFormatInput();handleTimeChange(startTime, startDate, \'start\');handleTimeChange(endTime, endDate, \'end\')"\n              [(ngModel)]="includeTime" type="checkbox">\n            <small>{{timeLabel}}</small>\n          </div>\n        </div>\n        <div class="label-placeholder label-option pr-25">\n          <div (click)="clear()">{{clearLabel}}</div>\n        </div>\n      </div>\n      <div class="zone-preview-dates divider">\n        <div class="child">\n          <div class="calendar-child-day">{{startDate?.format(\'D\')}}</div>\n          <div>\n            <div class="calendar-child-month">{{startDate?.format(\'MMMM YYYY\')}}</div>\n            <div class="calendar-child-week">{{startDate?.format(\'dddd\')}}</div>\n          </div>\n        </div>\n        <div class="child">\n          <input #startTimePicker type="text" class="input-hour" autocomplete="nope" spellcheck="false"\n            [ngModel]="startDate.format(\'h:mm A\')" *ngIf="startDate && includeTime"\n            (ngModelChange)="setStartTime($event)" (blur)="handleTimeChange(startTime, startDate, \'start\')"\n            (keyup.enter)="handleTimeChange(startTime, startDate, \'start\')">\n        </div>\n      </div>\n      <div class="zone-preview-dates divider" *ngIf="includeEndDate">\n        <div class="child">\n          <div class="calendar-child-day">{{endDate?.format(\'D\')}}</div>\n          <div>\n            <div class="calendar-child-month">{{endDate?.format(\'MMMM YYYY\')}}</div>\n            <div class="calendar-child-week">{{endDate?.format(\'dddd\')}}</div>\n          </div>\n        </div>\n        <div class="child">\n\n          <ng-container *ngIf="endDate">\n            <input #endTimePicker type="text" class="input-hour" autocomplete="nope" spellcheck="false"\n              [ngModel]="endDate.format(\'h:mm A\')" (ngModelChange)="setEndTime($event)" *ngIf="includeTime"\n              (blur)="handleTimeChange(endTime, endDate, \'end\')"\n              (keyup.enter)="handleTimeChange(endTime, endDate, \'end\')">\n          </ng-container>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n',providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:e.forwardRef((function(){return c})),multi:!0}],styles:['.datetimepicker-footer{display:flex;flex:1;justify-content:space-evenly;margin:0}.datetimepicker-selection-start{align-items:center;background:rgba(242,241,238,.6);border-radius:3px;box-shadow:inset 0 0 0 1px rgba(15,15,15,.1),inset 0 1px 1px rgba(15,15,15,.1);display:flex;flex-basis:50%;flex-grow:1;font-size:14px;height:28px;line-height:1.2;padding-left:8px;padding-right:8px}.slider{background-color:#ccc;bottom:0;cursor:pointer;left:0;right:0;top:0}.slider,.slider:before{position:absolute;transition:.4s}.slider:before{background-color:#fff;bottom:4px;content:"";height:26px;left:4px;width:26px}input:checked+.slider{background-color:#00d1b2}input:focus+.slider{box-shadow:0 0 1px #00d1b2}input:checked+.slider:before{transform:translateX(26px)}.slider.round{border-radius:34px}.slider.round:before{border-radius:50%}.pb10{padding-bottom:10px}.flex{display:flex}.w33p{width:33.33%}.align-right{text-align:right}.w56p{width:56.33%}.align-left{text-align:left}.pl10{padding-left:10px}.calendar-nav-next-month>button,.calendar-nav-previous-month>button{background-size:100%;height:25px}.calendar-nav>div{align-items:center;display:flex;height:25px}']}]}],c.ctorParameters=function(){return[]},c.propDecorators={value:[{type:e.Input}],startTimePicker:[{type:e.ViewChild,args:["startTimePicker"]}],endTimePicker:[{type:e.ViewChild,args:["endTimePicker"]}],isRange:[{type:e.Input}],hasTime:[{type:e.Input}],startDate:[{type:e.Input}],endDate:[{type:e.Input}],minDate:[{type:e.Input}],maxDate:[{type:e.Input}],classInput:[{type:e.Input}],locale:[{type:e.Input}],rangeLabel:[{type:e.Input}],timeLabel:[{type:e.Input}],clearLabel:[{type:e.Input}],emitSelected:[{type:e.Output}]};var h=function(){function t(t){this.elementRef=t,this.clickOutside=new e.EventEmitter}return t.prototype.onClick=function(t){var e=t.classList||[];Array.from(e).includes("omit-trigger-outside")||(this.elementRef.nativeElement.contains(t)||this.clickOutside.emit())},t}();h.decorators=[{type:e.Directive,args:[{selector:"[clickOutside]"}]}],h.ctorParameters=function(){return[{type:e.ElementRef}]},h.propDecorators={clickOutside:[{type:e.Output}],onClick:[{type:e.HostListener,args:["document:click",["$event.target"]]}]};var u=function(){};u.decorators=[{type:e.NgModule,args:[{declarations:[d,c,h],imports:[i.CommonModule,a.FormsModule],exports:[c]}]}],t.DatepickerComponent=c,t.NgxFunnyDatepickerComponent=d,t.NgxFunnyDatepickerModule=u,t.NgxFunnyDatepickerService=o,t.ɵa=h,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-funny-datepicker.umd.min.js.map